import numpy as np
import matplotlib.pyplot as plt
import cv2

lst_two_filters = [0.774649665446282, 0.8112612043933847, 0.7544501956823634, 0.7482641080671633, 0.7468753945208938,
                   0.7635399570761268, 0.7959853553844212, 0.7958591086983967, 0.7752808988764045, 0.7730084585279636,
                   0.8150486049741195, 0.8235071329377603, 0.8418129024113117, 0.8846105289736145, 0.921222067920717,
                   0.8977401843201616, 0.8813281151369776, 0.8770357278121449, 0.8937002903673779, 0.9197071076884232,
                   0.9346042166393133, 0.9340992298952152, 0.9146572402474435, 0.9053149854816311, 0.9406640575684888,
                   0.9781593233177629, 0.992046458780457, 0.9910364852922611, 0.985355384421159]
lst_one_filter = [0.7095063754576443, 0.767201110970837, 0.7745234187602575, 0.7702310314354248, 0.7646761772503472,
                  0.7714934982956697, 0.7709885115515718, 0.7706097714934983, 0.7798257795732862, 0.7877793207928292,
                  0.8430753692715566, 0.8425703825274586, 0.8435803560156546, 0.8592349450826916, 0.9046837520515086,
                  0.8978664310061861, 0.9021588183310189, 0.9069561923999495, 0.9104910996086353, 0.9106173462946597,
                  0.9132685267011741, 0.9271556621638682, 0.9279131422800152, 0.9303118293144805, 0.9590960737280646,
                  0.9799267769221058, 0.9878803181416488, 0.9862391112233304, 0.9856078777932079]

# plt.plot(range(99, 2900, 100), lst_two_filters, label="Applied two filters")
# plt.plot(range(99, 2900, 100), lst_one_filter, label="Applied one filter")
# plt.grid(True)
# plt.title("QR was embedded. Compressed with bitrate = 10m bits per sec")
# plt.legend()
# plt.show()

full_psnr = 0

# for i in range(50):
#     image1 = cv2.imread("D:/pythonProject/phase_wm/frames_orig_video/frame%d.png" % i)
#     image2 = cv2.imread("D:/pythonProject/phase_wm/frames_after_emb/frame%d.png" % i)
#
#     full_psnr += cv2.PSNR(image1, image2)
#
# print(full_psnr / 50)

# PSNR A=1 46.2 A=2 45.3 A=3 41.82


shift0no_compr = [0.8916, 0.85657, 0.92781, 0.92426, 0.96994, 0.9974, 0.9832, 0.99195, 0.99195, 0.99905, 0.99976,
                  0.99053, 0.99811, 0.99905, 0.99953, 1.0, 0.99834, 1.0, 1.0, 0.99976, 1.0, 0.99976, 1.0, 1.0, 0.99976,
                  1.0, 1.0, 1.0, 1.0, 1.0]

shift10no_compr = [0.93089, 0.87385, 0.95882, 0.96757, 0.9955, 0.99976, 0.99929, 0.99953, 1.0, 0.99905, 1.0, 1.0, 1.0,
                   1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0,
                   1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 0.99976, 0.99953, 0.99905, 0.99811, 0.9974,
                   0.99858, 0.99787, 0.99763, 0.99811, 0.99811, 0.99811, 0.99834, 0.99858, 0.99929, 0.99929, 0.99953]

shift40no_compr = [0.9458, 0.8703, 0.96355, 0.97609, 0.99953, 1.0, 1.0, 1.0, 1.0, 0.99953, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0,
                   1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0,
                   1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0,
                   1.0, 1.0, 1.0, 1.0]

shift0bitr5 = [0.77278, 0.75479, 0.74556, 0.76828, 0.72663, 0.83716, 0.77207, 0.78769, 0.85302, 0.81941, 0.8774,
               0.84189, 0.83763, 0.9129, 0.86012, 0.88686, 0.90249, 0.85775, 0.91219, 0.87645, 0.87787, 0.90888,
               0.87195, 0.91337, 0.8987, 0.88237, 0.91337, 0.86888, 0.90296, 0.90533]

shift10bitr5 = [0.77325, 0.74462, 0.7342, 0.65444, 0.70083, 0.80876, 0.75219, 0.76426, 0.82746, 0.77089, 0.85302,
                0.82391, 0.80734, 0.87574, 0.82343, 0.86225, 0.8658, 0.82675, 0.88402, 0.84994, 0.8587, 0.88757,
                0.85988, 0.89089, 0.86793, 0.83976, 0.86627, 0.81254, 0.85325, 0.85373, 0.84, 0.8826, 0.85231, 0.87361,
                0.88923, 0.86272, 0.89751, 0.87953, 0.87337, 0.89846, 0.85917, 0.8942, 0.8871, 0.8613, 0.88071, 0.85893,
                0.86817, 0.87408, 0.84734, 0.87243, 0.86651, 0.8497, 0.87195, 0.85349, 0.86959, 0.86935, 0.85065,
                0.8729, 0.86036, 0.86391]

shift40bitr5 = [0.67716, 0.6587, 0.62769, 0.57988, 0.58675, 0.66675, 0.6232, 0.63692, 0.66083, 0.61728, 0.68544,
                0.65704, 0.61704, 0.68852, 0.63834, 0.69041, 0.69799, 0.65207, 0.72024, 0.67314, 0.70391, 0.72355,
                0.6729, 0.71621, 0.67527, 0.66083, 0.67243, 0.63479, 0.6568, 0.65112, 0.63598, 0.6658, 0.63479, 0.65349,
                0.65846, 0.63337, 0.66769, 0.64331, 0.64379, 0.65444, 0.62888, 0.65799, 0.66367, 0.64521, 0.66935,
                0.66201, 0.67219, 0.67172, 0.65917, 0.68213, 0.67882, 0.68071, 0.69586, 0.66083, 0.6942, 0.68473,
                0.67361, 0.69183, 0.67006, 0.69396]

plt.plot(range(10, 309, 10), shift0bitr5, label="Shift = 0")
plt.plot(range(10, 309, 10), shift10bitr5[:30], label="Shift = 10")
plt.plot(range(10, 309, 10), shift40bitr5[:30], label="Shift = 40")
plt.grid(True)
plt.xlabel("Number of Frame", fontsize=20)
plt.ylabel("Accuracy", fontsize=20)
plt.legend(fontsize=20)
plt.title("QR size = 49x49. Container size = 1024x1024. Bitrate = 5M", fontsize=20)
plt.legend()
plt.show()
