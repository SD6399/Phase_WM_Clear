import numpy as np
import matplotlib.pyplot as plt
import cv2

lst_two_filters = [0.774649665446282, 0.8112612043933847, 0.7544501956823634, 0.7482641080671633, 0.7468753945208938,
                   0.7635399570761268, 0.7959853553844212, 0.7958591086983967, 0.7752808988764045, 0.7730084585279636,
                   0.8150486049741195, 0.8235071329377603, 0.8418129024113117, 0.8846105289736145, 0.921222067920717,
                   0.8977401843201616, 0.8813281151369776, 0.8770357278121449, 0.8937002903673779, 0.9197071076884232,
                   0.9346042166393133, 0.9340992298952152, 0.9146572402474435, 0.9053149854816311, 0.9406640575684888,
                   0.9781593233177629, 0.992046458780457, 0.9910364852922611, 0.985355384421159]
lst_one_filter = [0.7095063754576443, 0.767201110970837, 0.7745234187602575, 0.7702310314354248, 0.7646761772503472,
                  0.7714934982956697, 0.7709885115515718, 0.7706097714934983, 0.7798257795732862, 0.7877793207928292,
                  0.8430753692715566, 0.8425703825274586, 0.8435803560156546, 0.8592349450826916, 0.9046837520515086,
                  0.8978664310061861, 0.9021588183310189, 0.9069561923999495, 0.9104910996086353, 0.9106173462946597,
                  0.9132685267011741, 0.9271556621638682, 0.9279131422800152, 0.9303118293144805, 0.9590960737280646,
                  0.9799267769221058, 0.9878803181416488, 0.9862391112233304, 0.9856078777932079]

# plt.plot(range(99, 2900, 100), lst_two_filters, label="Applied two filters")
# plt.plot(range(99, 2900, 100), lst_one_filter, label="Applied one filter")
# plt.grid(True)
# plt.title("QR was embedded. Compressed with bitrate = 10m bits per sec")
# plt.legend()
# plt.show()

full_psnr = 0

for i in range(50):
    image1 = cv2.imread("D:/pythonProject/phase_wm/frames_orig_video/frame%d.png" % i)
    image2 = cv2.imread("D:/pythonProject/phase_wm/frames_after_emb/frame%d.png" % i)

    full_psnr += cv2.PSNR(image1, image2)

print(full_psnr / 50)

# PSNR A=1 46.2 A=2 45.3 A=3 41.82
