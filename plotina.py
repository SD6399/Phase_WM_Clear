import matplotlib.pyplot as plt
import numpy as np
import cv2

# alf01 = [0.8683881715951687, 0.8359017076218243, 0.9496043315285297, 0.9541857559350271, 0.9820907955018742,
#          0.9979175343606831, 0.9966680549770929, 0.9958350687213661, 0.9995835068721366, 0.9987505206164098]
#
# alf03 = [0.905039566847147, 0.8646397334443982, 0.9550187421907539, 0.9737609329446064, 0.9754269054560599,
#          0.9962515618492295, 0.9975010412328197, 0.994585589337776, 1.0, 0.9979175343606831]
#
# alf0005 = [0.9866722199083715, 0.9991670137442732, 0.9991670137442732, 0.9954185755935027, 0.9991670137442732,
#            0.9995835068721366, 0.9979175343606831, 0.9983340274885465, 0.9983340274885465, 0.9983340274885465]
#
# alf005 = [0.9862557267805081, 0.9966680549770929, 0.9987505206164098, 0.9966680549770929, 0.9975010412328197,
#           0.9987505206164098, 0.9979175343606831, 0.9920866305705955, 0.9716784673052895, 0.9641815910037485]
#
# alf02 = [0.9808413161182841, 0.9991670137442732, 0.9920866305705955, 0.9970845481049563, 0.9941690962099126,
#          0.9970845481049563, 0.9900041649312786, 0.9287796751353603, 0.8763015410245731, 0.8608912952936276]
#
# alf04 = [0.9920866305705955, 0.9995835068721366, 0.9970845481049563, 0.9966680549770929, 0.994585589337776,
#          0.9975010412328197, 0.9858392336526447, 0.9283631820074969, 0.8746355685131195, 0.8500624739691796]

# alf001 = [0.5926697209496044, 0.7122032486463973, 0.5755935027072053, 0.5855893377759267, 0.592253227821741,
#           0.7313619325281133, 0.7076218242399, 0.7234485630987089, 0.7842565597667639, 0.760932944606414]

"""
bitrate [20,10,5] A=3
"""
a3btr5 = [0.6859641815910037, 0.6655560183256977, 0.6343190337359433, 0.668054977092878, 0.6817992503123699,
          0.6951270304039984, 0.7134527280299875, 0.7355268638067471, 0.7513536026655561, 0.7638483965014577,
          0.7625989171178675, 0.7625989171178675, 0.7780091628488129, 0.7921699291961682, 0.8017492711370262,
          0.8100791336942941, 0.8213244481466055, 0.8329862557267805, 0.8413161182840483, 0.8488129945855893,
          0.8504789670970428, 0.8525614327363599, 0.855893377759267, 0.855893377759267, 0.855893377759267,
          0.855893377759267, 0.855893377759267, 0.855893377759267, 0.855893377759267, 0.855893377759267]

a3btr10 = [0.7934194085797585, 0.7909204498125781, 0.7942523948354853, 0.8592253227821741, 0.8883798417326114,
           0.9075385256143274, 0.9229487713452728, 0.9333610995418575, 0.9379425239483549, 0.9471053727613494,
           0.9471053727613494, 0.9471053727613494, 0.9525197834235735, 0.9608496459808413, 0.9641815910037485,
           0.9704289879216993, 0.973344439816743, 0.9750104123281966, 0.978758850478967, 0.9804248229904207,
           0.9833402748854644, 0.9841732611411912, 0.9858392336526447, 0.9858392336526447, 0.9858392336526447,
           0.9858392336526447, 0.9858392336526447, 0.9858392336526447, 0.9858392336526447, 0.9858392336526447]

a3btr20 = [0.8379841732611412, 0.855893377759267, 0.8796334860474803, 0.9308621407746772, 0.9579341940857976,
           0.9691795085381091, 0.9762598917117867, 0.9804248229904207, 0.9833402748854644, 0.9841732611411912,
           0.9841732611411912, 0.9841732611411912, 0.9862557267805081, 0.9883381924198251, 0.9891711786755518,
           0.9916701374427322, 0.9950020824656394, 0.9962515618492295, 0.9975010412328197, 0.9983340274885465,
           0.9983340274885465, 0.9983340274885465, 0.9983340274885465, 0.9983340274885465, 0.9983340274885465,
           0.9983340274885465, 0.9983340274885465, 0.9983340274885465, 0.9983340274885465, 0.9983340274885465]

mpeg_bitr20 = [0.8404831320283215, 0.9587671803415244, 0.985006247396918, 0.9866722199083715, 0.990420658059142,
               0.9937526030820492, 0.9975010412328197, 0.9975010412328197, 0.9975010412328197, 0.9975010412328197,
               0.9975010412328197, 0.9975010412328197, 0.9975010412328197, 0.9975010412328197, 0.9979175343606831,
               0.9979175343606831, 0.9979175343606831, 0.9979175343606831, 0.9979175343606831, 0.9979175343606831,
               0.9975010412328197, 0.9983340274885465, 0.9979175343606831, 0.9979175343606831, 0.9979175343606831,
               0.9979175343606831, 0.9979175343606831, 0.9979175343606831, 0.9979175343606831, 0.9979175343606831,
               0.9979175343606831, 0.9979175343606831, 0.9979175343606831, 0.9979175343606831, 0.9983340274885465,
               0.9983340274885465, 0.9983340274885465, 0.9983340274885465, 0.9983340274885465, 0.9983340274885465,
               0.9983340274885465, 0.9983340274885465, 0.9983340274885465, 0.9987505206164098, 0.9983340274885465,
               0.9983340274885465, 0.9987505206164098, 0.9987505206164098, 0.9987505206164098, 0.9987505206164098,
               0.9987505206164098, 0.9987505206164098, 0.9987505206164098, 0.9987505206164098, 0.9987505206164098,
               0.9991670137442732, 0.9991670137442732, 0.9991670137442732, 0.9991670137442732, 0.9991670137442732,
               0.9991670137442732, 0.9991670137442732, 0.9991670137442732, 0.9991670137442732, 0.9991670137442732,
               0.9991670137442732, 0.9995835068721366, 0.9995835068721366, 0.9995835068721366, 0.9995835068721366,
               0.9995835068721366, 0.9995835068721366, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0,
               1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0]

mpeg_bitr10 = [0.7084548104956269, 0.8242399000416493, 0.8812994585589338, 0.8950437317784257, 0.9183673469387755,
               0.9346105789254477, 0.9471053727613494, 0.9496043315285297, 0.9496043315285297, 0.9496043315285297,
               0.9496043315285297, 0.9496043315285297, 0.9496043315285297, 0.9504373177842566, 0.95085381091212,
               0.95085381091212, 0.95085381091212, 0.9516867971678468, 0.9525197834235735, 0.9541857559350271,
               0.9600166597251145, 0.9625156184922948, 0.9650145772594753, 0.9650145772594753, 0.9650145772594753,
               0.9650145772594753, 0.9650145772594753, 0.9650145772594753, 0.9650145772594753, 0.9650145772594753,
               0.9650145772594753, 0.9650145772594753, 0.9650145772594753, 0.9650145772594753, 0.9670970428987922,
               0.9708454810495627, 0.9725114535610162, 0.9725114535610162, 0.9725114535610162, 0.9725114535610162,
               0.9725114535610162, 0.9725114535610162, 0.9725114535610162, 0.9745939192003332, 0.9775093710953769,
               0.9795918367346939, 0.9825072886297376, 0.9825072886297376, 0.9825072886297376, 0.9825072886297376,
               0.9825072886297376, 0.9825072886297376, 0.9825072886297376, 0.9825072886297376, 0.9825072886297376,
               0.9825072886297376, 0.9825072886297376, 0.9825072886297376, 0.9825072886297376, 0.9825072886297376,
               0.982923781757601, 0.982923781757601, 0.982923781757601, 0.9833402748854644, 0.982923781757601,
               0.9837567680133278, 0.9837567680133278, 0.9837567680133278, 0.9833402748854644, 0.9833402748854644,
               0.9833402748854644, 0.9841732611411912, 0.9854227405247813, 0.9858392336526447, 0.9858392336526447,
               0.9858392336526447, 0.9858392336526447, 0.9858392336526447, 0.9870887130362349, 0.9895876718034152,
               0.990420658059142, 0.9920866305705955, 0.9920866305705955, 0.9920866305705955, 0.9933361099541858,
               0.9933361099541858, 0.9933361099541858, 0.9941690962099126, 0.9941690962099126, 0.9941690962099126,
               0.9941690962099126, 0.9941690962099126, 0.9941690962099126, 0.9941690962099126, 0.9941690962099126,
               0.9941690962099126]

mpeg_bitr5 = [0.8475635152019991, 0.8842149104539775, 0.887963348604748, 0.872969596001666, 0.8696376509787589,
              0.8767180341524364, 0.8779675135360266, 0.8779675135360266, 0.8779675135360266, 0.8779675135360266,
              0.8779675135360266, 0.8779675135360266, 0.8779675135360266, 0.87838400666389, 0.8775510204081632,
              0.8775510204081632, 0.8775510204081632, 0.8763015410245731, 0.8758850478967097, 0.8758850478967097,
              0.8704706372344856, 0.8575593502707205, 0.8429820907955019, 0.8429820907955019, 0.8438150770512286,
              0.8438150770512286, 0.8438150770512286, 0.8438150770512286, 0.8438150770512286, 0.8438150770512286,
              0.8438150770512286, 0.8438150770512286, 0.8438150770512286, 0.8438150770512286, 0.8450645564348188,
              0.8513119533527697, 0.8513119533527697, 0.8513119533527697, 0.8513119533527697, 0.8513119533527697,
              0.8513119533527697, 0.8513119533527697, 0.8513119533527697, 0.8533944189920867, 0.8583923365264473,
              0.8658892128279884, 0.8688046647230321, 0.8721366097459392, 0.8725531028738026, 0.8725531028738026,
              0.8725531028738026, 0.8725531028738026, 0.8725531028738026, 0.8725531028738026, 0.8725531028738026,
              0.8721366097459392, 0.8721366097459392, 0.8721366097459392, 0.8721366097459392, 0.8725531028738026,
              0.8725531028738026, 0.8725531028738026, 0.8725531028738026, 0.8725531028738026, 0.8733860891295293,
              0.8746355685131195, 0.8738025822573927, 0.8742190753852561, 0.8750520616409829, 0.8750520616409829,
              0.8750520616409829, 0.8775510204081632, 0.8796334860474803, 0.8817159516867972, 0.882548937942524,
              0.882548937942524, 0.882548937942524, 0.882548937942524, 0.8842149104539775, 0.8883798417326114,
              0.8892128279883382, 0.8904623073719283, 0.8904623073719283, 0.8904623073719283, 0.8917117867555185,
              0.8958767180341525, 0.8971261974177426, 0.8992086630570596, 0.9004581424406497, 0.9000416493127863,
              0.9004581424406497, 0.9004581424406497, 0.9004581424406497, 0.9004581424406497, 0.9004581424406497,
              0.9004581424406497]

x264bitr20 = [0.87838, 0.96668, 0.97501, 0.97126, 0.96168, 0.93253, 0.88921, 0.88671, 0.88671, 0.88671, 0.88671,
              0.88671, 0.88671, 0.89046, 0.89213, 0.89213, 0.89213, 0.89754, 0.90546, 0.93836, 0.95377, 0.96668,
              0.97209, 0.97209, 0.97209, 0.97209, 0.97209, 0.97209, 0.97209, 0.97209, 0.97209, 0.97209, 0.97209,
              0.97209, 0.97584, 0.97834, 0.98376, 0.98376, 0.98376, 0.98376, 0.98376, 0.98376, 0.98376, 0.98542,
              0.98834, 0.99125, 0.99209, 0.99292, 0.99334, 0.99375, 0.99375, 0.99375, 0.99375, 0.99375, 0.99375,
              0.99375, 0.99375, 0.99375, 0.99375, 0.99417, 0.99459, 0.99459, 0.99459, 0.99459, 0.995, 0.995, 0.99584,
              0.99584, 0.99625, 0.99625, 0.99625, 0.9975, 0.99792, 0.99875, 0.99875, 0.99875, 0.99875, 0.99875, 0.99833,
              0.99792, 0.9975, 0.99542, 0.99542, 0.99542, 0.995, 0.99375, 0.99292, 0.99209, 0.99125, 0.99084, 0.99042,
              0.99042, 0.99042, 0.99042, 0.99042, 0.99042]

x264bitr10 = [0.79217, 0.90962, 0.91962, 0.91212, 0.88588, 0.84173, 0.79467, 0.78009, 0.78009, 0.78009, 0.78009,
              0.78009, 0.78009, 0.78217, 0.78051, 0.78051, 0.78051, 0.77968, 0.77843, 0.77093, 0.7651, 0.75552, 0.76177,
              0.76177, 0.76177, 0.76177, 0.76177, 0.76177, 0.76177, 0.76177, 0.76177, 0.76177, 0.76177, 0.76177,
              0.76801, 0.77884, 0.78509, 0.78509, 0.78509, 0.78509, 0.78509, 0.78509, 0.78509, 0.79217, 0.81091,
              0.82216, 0.83632, 0.8409, 0.8409, 0.84132, 0.84132, 0.84132, 0.84132, 0.84132, 0.84132, 0.84215, 0.84215,
              0.84215, 0.84215, 0.84298, 0.84298, 0.84382, 0.84382, 0.84423, 0.84756, 0.84798, 0.84923, 0.85048,
              0.85131, 0.85131, 0.85131, 0.86381, 0.87089, 0.87713, 0.88088, 0.88088, 0.88088, 0.88088, 0.89046,
              0.90171, 0.9142, 0.92378, 0.92503, 0.92503, 0.92961, 0.93961, 0.94794, 0.95085, 0.95627, 0.95752, 0.95793,
              0.95793, 0.95793, 0.95793, 0.95793, 0.95793]

x264bitr5 = [0.6364, 0.69138, 0.70762, 0.68971, 0.65514, 0.62932, 0.60808, 0.60392, 0.60392, 0.60392, 0.60392, 0.60392,
             0.60392, 0.6035, 0.6035, 0.6035, 0.6035, 0.60308, 0.60225, 0.60392, 0.60017, 0.60267, 0.60683, 0.60683,
             0.60725, 0.60725, 0.60725, 0.60725, 0.60725, 0.60725, 0.60725, 0.60725, 0.60725, 0.60725, 0.61224, 0.62224,
             0.62932, 0.62932, 0.62932, 0.62932, 0.62932, 0.62932, 0.62932, 0.64057, 0.65264, 0.66514, 0.67847, 0.68555,
             0.68596, 0.68555, 0.68555, 0.68555, 0.68555, 0.68555, 0.68555, 0.68721, 0.68721, 0.68721, 0.68721, 0.68888,
             0.6893, 0.6893, 0.6918, 0.69304, 0.69471, 0.69804, 0.70012, 0.70346, 0.70596, 0.70596, 0.70679, 0.7172,
             0.7272, 0.73803, 0.74261, 0.74261, 0.74261, 0.74261, 0.74885, 0.76177, 0.78384, 0.79592, 0.79675, 0.79675,
             0.8105, 0.82382, 0.83507, 0.84798, 0.85298, 0.85589, 0.85714, 0.85756, 0.85756, 0.85756, 0.85756, 0.85756]

contsize256wm49 = [0.89349, 0.86793, 0.94769, 0.95527, 0.96947, 0.99195, 0.98556, 0.9903, 0.99172, 0.99763, 0.99834,
                   0.99337, 0.99385, 0.99811, 0.99858, 0.99882, 0.99716, 0.99953, 0.99976, 0.99953, 0.99953, 0.99953,
                   1.0, 1.0, 0.99929, 0.99953, 0.99858, 0.99574, 0.9955, 0.99385]

contsize256wm65 = [0.73373, 0.72142, 0.83811, 0.85609, 0.88497, 0.95574, 0.93183, 0.94627, 0.95266, 0.97302, 0.97018,
                   0.94888, 0.95574, 0.97325, 0.97396, 0.98651, 0.97799, 0.98888, 0.99432, 0.99148, 0.99669, 0.99385,
                   0.99763, 0.99716, 0.99266, 0.99385, 0.9903, 0.98746, 0.98675, 0.98083]

contsize256wm81 = [0.60118, 0.59905, 0.7058, 0.72521, 0.76473, 0.86249, 0.83101, 0.85751, 0.86533, 0.90296, 0.89254,
                   0.86533, 0.87669, 0.90296, 0.90201, 0.92331, 0.90864, 0.93207, 0.95219, 0.94036, 0.95432, 0.94935,
                   0.96024, 0.95929, 0.93822, 0.93633, 0.92047, 0.90935, 0.90793, 0.89917]

contsize10246wm49 = [0.8916, 0.85657, 0.92781, 0.92426, 0.96994, 0.9974, 0.9832, 0.99195, 0.99195, 0.99905, 0.99976,
                     0.99053, 0.99811, 0.99905, 0.99953, 1.0, 0.99834, 1.0, 1.0, 0.99976, 1.0, 0.99976, 1.0, 1.0,
                     0.99976, 1.0, 1.0, 1.0, 1.0, 1.0]

contsize1024wm65 = [0.86036, 0.79905, 0.93183, 0.92426, 0.97964, 1.0, 0.98675, 0.99598, 0.9955, 0.99976, 1.0, 0.99385,
                    0.99834, 0.99976, 0.99953, 1.0, 0.99905, 1.0, 1.0, 1.0, 1.0, 1.0, 1, 1, 1, 1.0, 1.0, 1.0, 1.0, 1.0]

contsize1024wm81 = [0.78296, 0.75456, 0.87621, 0.86201, 0.95172, 0.99882, 0.97751, 0.9929, 0.99314, 0.99858, 1.0,
                    0.98982, 0.99811, 0.99929, 0.99953, 1.0, 0.99882, 1.0, 1.0, 0.99976, 1.0, 0.99976, 1.0, 1.0,
                    0.99976, 1.0, 1.0, 1.0, 1.0, 1.0]

contsize1024wm49bitr5 = [0.77278, 0.75479, 0.74556, 0.76828, 0.72663, 0.83716, 0.77207, 0.78769, 0.85302, 0.81941,
                         0.8774, 0.84189, 0.83763, 0.9129, 0.86012, 0.88686, 0.90249, 0.85775, 0.91219, 0.87645,
                         0.87787, 0.90888, 0.87195, 0.91337, 0.8987, 0.88237, 0.91337, 0.86888, 0.90296, 0.90533]

contsize1024wm65bitr5 = [0.62651, 0.60402, 0.59953, 0.54698, 0.58462, 0.6826, 0.62817, 0.62083, 0.70343, 0.65089,
                         0.73254, 0.69136, 0.68237, 0.77444, 0.71408, 0.75479, 0.7716, 0.71314, 0.78178, 0.74107,
                         0.7458, 0.78769, 0.74698, 0.79645, 0.77183, 0.74722, 0.78769, 0.7368, 0.77136, 0.78225]

contsize1024wm81bitr5 = [0.55195, 0.54107, 0.52757, 0.5129, 0.52402, 0.59787, 0.54272, 0.55243, 0.61302, 0.57941,
                         0.65231, 0.59858, 0.60142, 0.68118, 0.62627, 0.66462, 0.67006, 0.63479, 0.69089, 0.64355,
                         0.65491, 0.69562, 0.66107, 0.70154, 0.67905, 0.65941, 0.7058, 0.65633, 0.69373, 0.68379]

contsize512wm65 = [0.77254, 0.82651, 0.91692, 0.90888, 0.94864, 0.99219, 0.97373, 0.9858, 0.98769, 0.99574, 0.99787,
                   0.98651, 0.99314, 0.99527, 0.99598, 0.99858, 0.99456, 0.99858, 0.99834, 0.99598, 0.99929, 0.99645,
                   0.99905, 0.99905, 0.99621, 0.99905, 0.99763, 0.99763, 0.99882, 0.99574]

fft = np.fft.ifft2(np.array([[1, 2, 4, 6], [4, 6, 8, 9]]))
ifft = np.fft.fft2(fft)
print(np.array([[1, 2, 4, 6], [4, 6, 8, 9]]))
print(ifft.real)

# plt.plot(alf0001, label="alfa = 0.001")
# plt.plot(alf001, label="alfa = 0.01")
plt.plot(np.arange(10, 307, 10), contsize256wm65, label="Size of Container = 256x256")
plt.plot(np.arange(10, 307, 10), contsize512wm65, label="Size of Container = 512x512")
plt.plot(np.arange(10, 307, 10), contsize1024wm65, label="Size of Container = 1024x1024")
# plt.plot(alf04, label="alfa = 0.4")
# plt.plot(alf05, label="alfa = 0.5")
# plt.plot(alf07, label="alfa = 0.7")
# plt.plot(alf09, label="alfa = 0.9")

plt.xlabel("Number of Frame", fontsize=20)
plt.ylabel("Accuracy", fontsize=20)
plt.title("RealBarca. Size of QR_code = 65", fontsize=20)
plt.legend(fontsize=20)
plt.grid(True)
plt.show()

# psnr_full = 0
# for i in range(50):
#     image1 = cv2.imread("D:\pythonProject\phase_wm/frames_after_emb/frame" + str(i) + ".png")
#     image2 = cv2.imread("D:\pythonProject\phase_wm/frames_orig_video/frame" + str(i) + ".png")
#
#     psnr_full += (cv2.PSNR(image1, image2))
#
# print(psnr_full / 50)

labels = [
    "QR_size=81,Cont_size=1024", "QR_size=65,Cont_size=1024", "QR_size=49,Cont_size=1024",
    "QR_size=81,Cont_size=512", "QR_size=65,Cont_size=512", "QR_size=49,Cont_size=512",
    "QR_size=81,Cont_size=256", "QR_size=65,Cont_size=256", "QR_size=49,Cont_size=256"
]
values = [46.4384, 46.4549, 46.4604, 46.3961, 46.4462, 46.4075, 46.4095, 46.4464, 46.344]

# Создание графика
plt.figure(figsize=(12, 6))
bars = plt.bar(labels, values, color='skyblue', edgecolor='black')

# Поворот подписей по оси X
plt.xticks(rotation=45, ha='right', fontsize=13)
# plt.yticks(fontsize=20)

# Сетка и подписи
plt.ylabel("PSNR", fontsize=20)
plt.grid(axis='y', linestyle='--', alpha=0.7)

# Сжатие отступов
plt.tight_layout()

# Показываем график
plt.show()
# Для А=1 psnr = 52; для А = 2 psnr = 46 для А=3 psnr = 43
